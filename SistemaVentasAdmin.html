<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sistema de Ventas - Inventario</title>
  <link rel="stylesheet" href="./front/styles.css" />
  <style>
    /* ======= AJUSTES VISUALES ======= */

    .search-box {
      position: sticky;
      top: 0;
      background: #fff;
      padding: 10px 12px;
      z-index: 2;
      border-bottom: 1px solid #eef2f7;
    }
    #searchProducts {
      width: 100%;
      padding: 10px 14px 10px 38px;
      border: 1.5px solid #d1d5db;
      border-radius: 10px;
      outline: none;
      font-size: 14px;
      background: #ffffff;
      transition: border-color .15s ease, box-shadow .15s ease;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="%2399a3ad" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85Zm-5.242.656a5 5 0 1 1 0-10a5 5 0 0 1 0 10Z"/></svg>');
      background-repeat: no-repeat;
      background-position: 12px center;
      background-size: 16px;
    }
    #searchProducts:focus {
      border-color: #60a5fa;
      box-shadow: 0 0 0 3px rgba(96,165,250,.25);
    }

    /* Panel derecho */
    .cart-panel {
      position: relative;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    .cart-title {
      padding: 12px 14px;
      border-bottom: 1px solid #eef2f7;
    }
    .cart-items {
      flex: 1 1 auto;
      overflow-y: auto;
      padding: 10px 12px 90px;
      box-sizing: border-box;
    }

    /* Barra total dentro del panel derecho */
    .checkout-bar {
      position: sticky;
      bottom: 0;
      background: #ffffff;
      border-top: 1px solid #e5e7eb;
      padding: 12px;
      box-shadow: 0 -2px 12px rgba(0,0,0,.06);
      display: none;            /* visible solo cuando hay items */
      margin-top: 15px;
      z-index: 3;
    }
    .checkout-inner {
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 12px;
      max-width: 90%;
      margin: 0 auto;
    }
    .total-strong {
      font-size: 15px;
      color: #111827;
      font-weight: 800;
    }
    .total-strong .label {
      font-weight: 700;
      color: #374151;
      margin-right: 6px;
    }

    /* Bot√≥n ticket */
    .btn-ticket-right {
      padding: 10px 16px;
      font-size: 14px;
      font-weight: 700;
      background: #2196f3;
      color: #fff;
      border: 0;
      border-radius: 10px;
      cursor: pointer;
      transition: transform .06s ease, box-shadow .15s ease;
      box-shadow: 0 2px 8px rgba(33,150,243,.25);
    }
    .btn-ticket-right:hover { background:#1d86d9; }
    .btn-ticket-right:active { transform: scale(.98); }

    .modal-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 10px;
    }

    .payment-btn {
      background-color: #2196f3 !important;
      color: #fff !important;
      border: 2px solid #1976d2 !important;
    }
    .payment-btn.active-payment {
      background: #2ecc71 !important;
      border-color: #27ae60 !important;
      box-shadow: 0 0 15px rgba(46,204,113,.7);
    }

    .stock-warning {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #fff3cd;
      color: #856404;
      border: 2px solid #ffeeba;
      padding: 15px 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,.3);
      z-index: 10000;
      font-weight: bold;
      animation: fadeIn .4s ease;
    }
    @keyframes fadeIn {
      from {opacity:0; transform:translateY(20px);}
      to {opacity:1; transform:translateY(0);}
    }

    /* üîπ reducir espacio blanco sobre los productos */
    .products-list {
  flex: 1;
  overflow-y: auto;
  padding-bottom: 40px;
  margin-top: 20px !important;   /* üîπ bajamos un poco los productos */
}

    body { overflow-x: hidden; }

    /* ‚úÖ AJUSTE: alinear alturas de panel izquierdo y ticket */
    .sales-container {
      display: flex;
      align-items: stretch;
    }
    .categories-panel {
      display: flex;
      flex-direction: column;
      height: calc(100vh - 60px);  /* 60px aprox altura de la navbar */
      overflow: hidden;
    }
/* üîß Ajuste de altura para mostrar m√°s productos visibles */
.products-list {
  flex: 1;
  overflow-y: auto;
  padding-bottom: 40px;
  margin-top: 40px !important;
  height: calc(80vh - 350px) !important; /* üîπ aumenta el √°rea visible */
}


.categories-grid {
  margin-bottom: 20px !important; /* üîπ espacio extra entre categor√≠as y productos */
}

  </style>
</head>

<body>
  <!-- Barra superior -->
  <div class="navbar">
    <h1>SISTEMA DE VENTA</h1>
    <div class="menu">
      <a href="Interfaz.html">INVENTARIO</a>
      <a href="SistemaVentasAdmin.html">VENTA</a>
      <a href="ReportesAdmin.html">REPORTES</a>
      <a href="Usuarios.html">USUARIOS</a>
      <a href="index.html">‚Æê SALIR</a>
    </div>
  </div>

  <!-- Contenedor principal -->
  <div class="sales-container">
    <!-- Panel izquierdo -->
    <div class="categories-panel" id="categoriesPanel">
      <div class="search-box">
        <input type="text" placeholder="üîç B√∫squeda de productos..." id="searchProducts" />
      </div>

      <div class="categories-title">CATEGOR√çAS</div>
      <div class="categories-grid">
        <button class="category-btn sabritas" onclick="filterByCategory('SABRITAS')"><span>SABRITAS</span></button>
        <button class="category-btn frutas" onclick="filterByCategory('FRUTAS Y VERDURAS')"><span>FRUTAS Y VERDURAS</span></button>
        <button class="category-btn limpieza" onclick="filterByCategory('LIMPIEZA')"><span>LIMPIEZA</span></button>
        <button class="category-btn bebidas" onclick="filterByCategory('BEBIDAS')"><span>BEBIDAS</span></button>
        <button class="category-btn farmacia" onclick="filterByCategory('FARMACIA')"><span>FARMACIA</span></button>
        <button class="category-btn abarrotes" onclick="filterByCategory('ABARROTES')"><span>ABARROTES</span></button>
      </div>

      <div class="products-list" id="productsList"></div>
    </div>

    <!-- Panel derecho -->
    <div class="cart-panel">
      <div class="cart-title">TICKET DE VENTA</div>
      <div class="cart-items" id="cartItems"></div>

      <!-- Barra total fija y bot√≥n ticket -->
      <div class="checkout-bar" id="checkoutBar">
        <div class="checkout-inner">
          <div class="total-strong">
            <span class="label">TOTAL A PAGAR:</span>
            <span id="totalAmount">$0.00</span>
          </div>
          <button class="btn-ticket-right" onclick="generateTicket()">TICKET</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal del ticket -->
  <div id="ticketModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>TICKET DE VENTA</h2>
        <button class="close-btn" onclick="closeTicketModal()">&times;</button>
      </div>

      <div class="ticket-content" id="ticketContent" style="text-align:center;">
        <!-- Logo arriba -->
        <img src="./front/img/inventariando.jpg" alt="inventariando" style="width:110px; margin-bottom:8px; opacity:0.85;">
      </div>

      <div class="payment-methods">
        <div class="payment-title">M√âTODO DE PAGO</div>
        <div class="payment-buttons">
          <button class="payment-btn btn-cash" onclick="selectPaymentMethod('efectivo')">EFECTIVO</button>
          <button class="payment-btn btn-transfer" onclick="selectPaymentMethod('transferencia')">TRANSFERENCIA</button>
        </div>

        <div class="cash-input-container" id="cashInputContainer" style="display:none;">
          <div class="cash-input-group">
            <label for="cashAmount">MONTO ENTREGADO:</label>
            <input type="number" id="cashAmount" placeholder="0.00" min="0" step="0.01" oninput="calculateChange()" />
          </div>
          <div class="change-display" id="changeDisplay" style="display:none;">
            CAMBIO: $<span id="changeAmount">0.00</span>
          </div>
        </div>
      </div>

      <!-- Botones centrados -->
      <div class="modal-buttons">
        <button class="modal-btn btn-cancel" onclick="closeTicketModal()">CERRAR</button>
        <button class="modal-btn btn-print" onclick="registerAndPrint()">IMPRIMIR</button>
      </div>
    </div>
  </div>

  <!-- ======= SCRIPT PRINCIPAL ======= -->
    <!-- ======= SCRIPT PRINCIPAL ======= -->
  <script src="./front/sistemaVentas.js"></script>
</body>
</html>

</body>
</html>
